<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Police Drone Dashboard</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="css/styles.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>
<body>
    <main class="container-fluid px-5">
       
        <header class="header mb-5">
            <div class="container py-3">
                <div class="row align-items-center">
                    <div class="col-auto text-center d-flex align-items-center justify-content-center w-100">
                        
                        <img src="images/police-logo.png" alt="Police Logo" class="police-logo" />
                        <h1 class="ml-5 mb-0 text-center fw-bold site-heading">Gujarat Police Monitoring Dashboard</h1>
                        
                    </div>
                </div>
            </div>
        </header>

        <div class="container mb-5">
            <div class="row gap-4">
                <div class="col-lg">
                    <section class="station-info">
                        <h2 class="profile-heading">Drone Station Address</h2>
                        <address class="station-address">
                            Doctor House, India Colony, Main Road, Bapunagar, Tolnaka, India
                            Colony, Ahmedabad, Gujarat 382350, India
                        </address>
            
                        <div class="info-section drone-info">
                            <div class="info-row">
                                <span class="info-label">Drone Number -</span>
                                <span class="info-value">2564834586</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Drone Response Time -</span>
                                <span class="info-value">2 minutes</span>
                            </div>
                        </div>
            
                        <div class="info-section pcr-info">
                            <div class="info-row">
                                <span class="info-label">PCR Number -</span>
                                <span class="info-value">454785646</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">PCR Callsign -</span>
                                <span class="info-value">*Name*</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">PCR Response Time -</span>
                                <span class="info-value">10 Minutes</span>
                            </div>
                        </div>
            
                        <div class="info-section motorbike-info">
                            <div class="info-row">
                                <span class="info-label">Motorbike -</span>
                                <span class="info-value">GJ 01 FG 5679</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Motorbike Callsign -</span>
                                <span class="info-value">*Name*</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Motorbike Response Time -</span>
                                <span class="info-value">5 Minutes</span>
                            </div>
                        </div>
            
                        <div class="info-section patrol-info">
                            <div class="info-row">
                                <span class="info-label">Foot Patrol -</span>
                                <span class="info-value">4 Patrolling Officers</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Foot Patrol Response Time -</span>
                                <span class="info-value">4 Minutes</span>
                            </div>
                        </div>
                    </section>
                </div>
                <div class="col-lg">
                    <section class="map-section map">
                        <div id="map" class="map"></div>
                    </section>
                </div>
                <div class="col-lg">
                    <aside class="user-profile">
                        <h2 class="profile-heading">User Profile</h2>
                        <div class="profile-info">
                            <div class="info-row">
                                <span class="info-label">Name -</span>
                                <span class="info-value">Sanjeevni Misra</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Phone -</span>
                                <span class="info-value">0265 251 7285</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Address -</span>
                                <span class="info-value">
                                    23 Jain Society, Behind Jalaram Temple Lane, opp. Jay Siyaram
                                    Pendawala Shop, Paldi, Ahmedabad, Gujarat 380006, India
                                </span>
                            </div>
                        </div>
            
                        <div class="emergency-contact">
                            <h3 class="emergency-heading">Emergency Contact Information</h3>
                            <div class="info-row">
                                <span class="info-label">Phone -</span>
                                <span class="info-value">0785 396 8585</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Status -</span>
                                <span class="info-value">Father</span>
                            </div>
                        </div>
            
                        <div class="map-legend">
                            <div class="legend-item">
                                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/8289aaaec3bdb21e50bfd18ce07564e8913ea427"
                                     alt="Drone icon"
                                     class="legend-icon" />
                                <span>- Drone</span>
                            </div>
                            <div class="legend-item">
                                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/53a46fb4d95861affe81b661c26af1083e1f571d"
                                     alt="Drone Station icon"
                                     class="legend-icon" />
                                <span>- Drone Station</span>
                            </div>
                            <div class="legend-item">
                                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/58819e325f8fb5201605ee5fa8d583ff7f86c316"
                                     alt="Crime icon"
                                     class="legend-icon" />
                                <span>- Crime</span>
                            </div>
                            <div class="legend-item">
                                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/75da33be1fef1b4247d176faa3e593ab6616a777"
                                     alt="PCR icon"
                                     class="legend-icon" />
                                <span>- PCR</span>
                            </div>
                            <div class="legend-item">
                                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/219db24620d1f23330696481133c73d86336d16d"
                                     alt="Motorbike icon"
                                     class="legend-icon" />
                                <span>- Motorbike</span>
                            </div>
                            <div class="legend-item">
                                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/4934aa0c6aff796e5c3f2aaa50ebce9ed6702bec"
                                     alt="Foot Patrol icon"
                                     class="legend-icon" />
                                <span>- Foot Patrol</span>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </div>

        <div class="container mb-5">
            <div class="row gap-3">
                <div class="col-lg">
                    <h3 class="footage-title">Drone Footage</h3>
                            <img src="images/video-img1.png"
                                 alt="Drone footage"
                                 class="footage-feed" />
                </div>
                <div class="col-lg">
                    <h3 class="footage-title">CCTV Feed</h3>
                    <img src="images/video-img2.png"
                                 alt="CCTV feed"
                                 class="footage-feed" />
                </div>
            </div>
        </div>
    </main>
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBlpCd4M34Hfxc-VRLXwUUZ6-pKFnKZA14&v=weekly&libraries=marker"
            defer></script>
    
    <script type="text/javascript">
        $(document).ready(function () {
            const position = { lat: 23.025, lng: 72.554 };

            
            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 12,
                center: position,
                mapId: "DEMO_MAP_ID", // Map ID is required for advanced markers.
            });

            var dataUrl = serverURL + '/api/drone';
            var _locations = [];
            const infoWindow = new google.maps.InfoWindow();
            // Fetch data from the URL
            $.getJSON(dataUrl, function (data) {
                $.each(data, function (index, item) {

                    var droneStationImg = document.createElement("img");
                    droneStationImg.src = "/StaticFiles/images/drone.png";

                    const droneMarkerView = new google.maps.marker.AdvancedMarkerElement({
                        map,
                        position: {lat:item.latitude,lng:item.longitude},
                        content: droneStationImg,
                        title: "Drone Number: " + item.droneNumber + '\nDeployed Location: ' + item.droneName + '\nAddress: ' + item.stationAddress,
                        gmpClickable: true,
                    });                   
                });
            });
        });
    </script>
</body>
</html>
